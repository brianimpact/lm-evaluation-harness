task: claire_cot
dataset_path: brianimpact/claire-eval
output_type: generate_until
test_split: test
doc_to_text: "Context: {{context}}\n\n내담자가 다음과 같이 이야기 했을 때 상담자가 해야 될 답변으로 적절한 답을 골라주세요: {{question}}\n\nA. {{A}}\nB. {{B}}\nC. {{C}}\nD. {{D}}\nE. {{E}}\n\n정답: 내담자의 마음에 공감하였을 때, 가장 적절한 답변은"
doc_to_target: "{{['A', 'B', 'C', 'D', 'E'][answer-1]}}"
metric_list:
  - metric: exact_match
    aggregation: mean
    higher_is_better: true
    ignore_case: true
    ignore_punctuation: true
    regexes_to_ignore:
      - " "
generation_kwargs:
  until:
    - "Q:"
    - "\n\n"
    - "</s>"
    - "<end_of_turn>"
    - "."
  do_sample: false
  temperature: 0.0

filter_list:
  - name: "get-answer"
    filter:
      - function: "regex"
        regex_pattern: "(?<=정답|답변)\\s*[은:]\\s*(A|B|C|D|E).*|(?<=따라서)\\s*(?:답변)?\\s*(A|B|C|D|E).*|\\s*(A|B|C|D|E)([\\.\\s]+)?(?(4).*|\\Z)|\\s*(A|B|C|D|E)가\\s+(?:가장 적절한)\\s+답변"
        group_select: 0
      - function: "take_first"
metadata:
  version: 0.1
